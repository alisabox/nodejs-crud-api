(()=>{var e={738:(e,n,t)=>{const o=t(147),r=t(17),i=t(37),a=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function s(e){console.log(`[dotenv][DEBUG] ${e}`)}const c={config:function(e){let n=r.resolve(process.cwd(),".env"),t="utf8";const a=Boolean(e&&e.debug),d=Boolean(e&&e.override);var u;e&&(null!=e.path&&(n="~"===(u=e.path)[0]?r.join(i.homedir(),u.slice(1)):u),null!=e.encoding&&(t=e.encoding));try{const e=c.parse(o.readFileSync(n,{encoding:t}));return Object.keys(e).forEach((function(n){Object.prototype.hasOwnProperty.call(process.env,n)?(!0===d&&(process.env[n]=e[n]),a&&s(!0===d?`"${n}" is already defined in \`process.env\` and WAS overwritten`:`"${n}" is already defined in \`process.env\` and was NOT overwritten`)):process.env[n]=e[n]})),{parsed:e}}catch(e){return a&&s(`Failed to load ${n} ${e.message}`),{error:e}}},parse:function(e){const n={};let t,o=e.toString();for(o=o.replace(/\r\n?/gm,"\n");null!=(t=a.exec(o));){const e=t[1];let o=t[2]||"";o=o.trim();const r=o[0];o=o.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===r&&(o=o.replace(/\\n/g,"\n"),o=o.replace(/\\r/g,"\r")),n[e]=o}return n}};e.exports.config=c.config,e.exports.parse=c.parse,e.exports=c},147:e=>{"use strict";e.exports=require("fs")},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var i=n[o]={exports:{}};return e[o](i,i.exports,t),i.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{"use strict";const e=require("http");var n=t.n(e);const o=require("cluster");var r=t.n(o),i=t(738),a=t.n(i);const s=require("crypto");var c=t.n(s);const d=new Uint8Array(256);let u=d.length;function l(){return u>d.length-16&&(c().randomFillSync(d),u=0),d.slice(u,u+=16)}const f=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,v=[];for(let e=0;e<256;++e)v.push((e+256).toString(16).substr(1));const p=function(e,n=0){const t=(v[e[n+0]]+v[e[n+1]]+v[e[n+2]]+v[e[n+3]]+"-"+v[e[n+4]]+v[e[n+5]]+"-"+v[e[n+6]]+v[e[n+7]]+"-"+v[e[n+8]]+v[e[n+9]]+"-"+v[e[n+10]]+v[e[n+11]]+v[e[n+12]]+v[e[n+13]]+v[e[n+14]]+v[e[n+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&f.test(e)}(t))throw TypeError("Stringified UUID is invalid");return t},y=function(e,n,t){const o=(e=e||{}).random||(e.rng||l)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n){t=t||0;for(let e=0;e<16;++e)n[t+e]=o[e];return n}return p(o)};var h=function(e,n,t,o){return new(t||(t=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,s)}c((o=o.apply(e,n||[])).next())}))};const g=e=>!!e.match("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$");let w=[];const m=e=>h(void 0,void 0,void 0,(function*(){return w.find((n=>n.id===e))})),x=e=>h(void 0,void 0,void 0,(function*(){return JSON.stringify(yield m(e))}));const b=(e,n,t)=>{return o=void 0,r=void 0,a=function*(){if(t&&g(t)){const e=yield(e=>h(void 0,void 0,void 0,(function*(){return!!(yield m(e))&&(w=w.filter((n=>n.id!==e)),!0)})))(t);e?(n.writeHead(204,{"Content-type":"application/json"}),n.end()):(n.writeHead(404,{"Content-type":"text/html"}),n.end("User Not Found"))}else n.writeHead(400,{"Content-type":"text/html"}),n.end("Invalid UserId")},new((i=void 0)||(i=Promise))((function(e,n){function t(e){try{c(a.next(e))}catch(e){n(e)}}function s(e){try{c(a.throw(e))}catch(e){n(e)}}function c(n){var o;n.done?e(n.value):(o=n.value,o instanceof i?o:new i((function(e){e(o)}))).then(t,s)}c((a=a.apply(o,r||[])).next())}));var o,r,i,a};const S=(e,n)=>{return t=void 0,o=void 0,i=function*(){n?g(n)?(yield m(n))?(e.writeHead(200,{"Content-type":"application/json"}),e.end(yield x(n))):(e.writeHead(404,{"Content-type":"text/html"}),e.end("User Not Found")):(e.writeHead(400,{"Content-type":"text/html"}),e.end("Invalid UserId")):(e.writeHead(200,{"Content-type":"application/json"}),e.end(JSON.stringify(w)))},new((r=void 0)||(r=Promise))((function(e,n){function a(e){try{c(i.next(e))}catch(e){n(e)}}function s(e){try{c(i.throw(e))}catch(e){n(e)}}function c(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((i=i.apply(t,o||[])).next())}));var t,o,r,i};var C=function(e,n,t,o){return new(t||(t=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,s)}c((o=o.apply(e,n||[])).next())}))};var O=function(e,n,t,o){return new(t||(t=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,s)}c((o=o.apply(e,n||[])).next())}))};const H=(e,n,t)=>O(void 0,void 0,void 0,(function*(){if(t&&g(t)){let o="";e.on("data",(e=>O(void 0,void 0,void 0,(function*(){if(o+=e.toString(),yield m(t)){const e=yield((e,n)=>h(void 0,void 0,void 0,(function*(){const t=yield JSON.parse(e);if(yield((e,n)=>h(void 0,void 0,void 0,(function*(){return(yield m(n))&&e.username&&e.age&&e.hobbies})))(t,n)){const e={id:n,username:t.username,age:t.age,hobbies:t.hobbies};return w=[...w.filter((e=>e.id!==n)),e],!0}return!1})))(o,t);e?(n.writeHead(200,{"Content-type":"application/json"}),n.end(yield x(t))):(n.writeHead(400,{"Content-type":"text/html"}),n.end("Invalid Data Format"))}else n.writeHead(404,{"Content-type":"text/html"}),n.end("User Not Found")}))))}else n.writeHead(400,{"Content-type":"text/html"}),n.end("Invalid UserId")})),$=require("process");a().config();const F=process.env.PORT,P=n().createServer(((e,n)=>{return t=void 0,o=void 0,i=function*(){var t,o;const r="/api/users",i=null===(t=e.url)||void 0===t?void 0:t.replace(r,"").substring(1);try{if(e.url===r||(null===(o=e.url)||void 0===o?void 0:o.startsWith(r))&&i)switch(e.method){case"GET":yield S(n,i);break;case"POST":yield((e,n)=>C(void 0,void 0,void 0,(function*(){let t="";e.on("data",(e=>C(void 0,void 0,void 0,(function*(){t+=e.toString();const o=yield(e=>h(void 0,void 0,void 0,(function*(){const n=yield JSON.parse(e);if(n.username&&n.age&&n.hobbies){const e={id:y(),username:n.username,age:n.age,hobbies:n.hobbies};return w.push(e),e}})))(t);o?(n.writeHead(201,{"Content-type":"application/json"}),n.end(JSON.stringify(o))):(n.writeHead(400,{"Content-type":"text/html"}),n.end("Invalid Data Format"))}))))})))(e,n);break;case"PUT":yield H(e,n,i);break;case"DELETE":yield b(0,n,i);break;default:yield S(n)}else n.writeHead(404,{"Content-type":"application/json"}),n.end(JSON.stringify({message:"Route Not Found"}))}catch(e){n.writeHead(500,{"Content-type":"application/json"}),n.end(JSON.stringify({message:"Internal Server Error"}))}},new((r=void 0)||(r=Promise))((function(e,n){function a(e){try{c(i.next(e))}catch(e){n(e)}}function s(e){try{c(i.throw(e))}catch(e){n(e)}}function c(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((i=i.apply(t,o||[])).next())}));var t,o,r,i}));if("multi"===$.env.npm_config_mode){const e=t(37).cpus().length;if(r().isPrimary){console.log(`Master ${process.pid} is running`);for(let n=0;n<e;n++)r().fork();r().on("exit",((e,n,t)=>{console.log(`worker ${e.process.pid} died`)}))}else P.listen(F,(()=>{console.log(`Worker ${process.pid} started`)}))}else P.listen(F,(()=>console.log(`Server started at http://localhost:${F}`)))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxFQUFRQyxFQUFNQyxLQUM5QjNJLFFBQVFDLElBQUksVUFBVXdJLEVBQU9sSSxRQUFRaUksb0JBSXpDYixFQUFPaUIsT0FBT2xCLEdBQU0sS0FDaEIxSCxRQUFRQyxJQUFJLFVBQVVNLFFBQVFpSSx1QkFLdENiLEVBQU9pQixPQUFPbEIsR0FBTSxJQUFNMUgsUUFBUUMsSUFBSSxzQ0FBc0N5SCxRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbm9kZWpzLWNydWQtYXBpLy4vbm9kZV9tb2R1bGVzL2RvdGVudi9saWIvbWFpbi5qcyIsIndlYnBhY2s6Ly9ub2RlanMtY3J1ZC1hcGkvZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcImZzXCIiLCJ3ZWJwYWNrOi8vbm9kZWpzLWNydWQtYXBpL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJvc1wiIiwid2VicGFjazovL25vZGVqcy1jcnVkLWFwaS9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwicGF0aFwiIiwid2VicGFjazovL25vZGVqcy1jcnVkLWFwaS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9ub2RlanMtY3J1ZC1hcGkvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vbm9kZWpzLWNydWQtYXBpL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9ub2RlanMtY3J1ZC1hcGkvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9ub2RlanMtY3J1ZC1hcGkvZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcImh0dHBcIiIsIndlYnBhY2s6Ly9ub2RlanMtY3J1ZC1hcGkvZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcImNsdXN0ZXJcIiIsIndlYnBhY2s6Ly9ub2RlanMtY3J1ZC1hcGkvZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcImNyeXB0b1wiIiwid2VicGFjazovL25vZGVqcy1jcnVkLWFwaS8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvcm5nLmpzIiwid2VicGFjazovL25vZGVqcy1jcnVkLWFwaS8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLW5vZGUvcmVnZXguanMiLCJ3ZWJwYWNrOi8vbm9kZWpzLWNydWQtYXBpLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS9zdHJpbmdpZnkuanMiLCJ3ZWJwYWNrOi8vbm9kZWpzLWNydWQtYXBpLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tbm9kZS92YWxpZGF0ZS5qcyIsIndlYnBhY2s6Ly9ub2RlanMtY3J1ZC1hcGkvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1ub2RlL3Y0LmpzIiwid2VicGFjazovL25vZGVqcy1jcnVkLWFwaS8uL3NyYy91dGlscy50cyIsIndlYnBhY2s6Ly9ub2RlanMtY3J1ZC1hcGkvLi9zcmMvbWV0aG9kcy9kZWxldGUudHMiLCJ3ZWJwYWNrOi8vbm9kZWpzLWNydWQtYXBpLy4vc3JjL21ldGhvZHMvZ2V0LnRzIiwid2VicGFjazovL25vZGVqcy1jcnVkLWFwaS8uL3NyYy9tZXRob2RzL3Bvc3QudHMiLCJ3ZWJwYWNrOi8vbm9kZWpzLWNydWQtYXBpLy4vc3JjL21ldGhvZHMvcHV0LnRzIiwid2VicGFjazovL25vZGVqcy1jcnVkLWFwaS9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwicHJvY2Vzc1wiIiwid2VicGFjazovL25vZGVqcy1jcnVkLWFwaS8uL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKVxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKVxuY29uc3Qgb3MgPSByZXF1aXJlKCdvcycpXG5cbmNvbnN0IExJTkUgPSAvKD86XnxeKVxccyooPzpleHBvcnRcXHMrKT8oW1xcdy4tXSspKD86XFxzKj1cXHMqP3w6XFxzKz8pKFxccyonKD86XFxcXCd8W14nXSkqJ3xcXHMqXCIoPzpcXFxcXCJ8W15cIl0pKlwifFxccypgKD86XFxcXGB8W15gXSkqYHxbXiNcXHJcXG5dKyk/XFxzKig/OiMuKik/KD86JHwkKS9tZ1xuXG4vLyBQYXJzZXIgc3JjIGludG8gYW4gT2JqZWN0XG5mdW5jdGlvbiBwYXJzZSAoc3JjKSB7XG4gIGNvbnN0IG9iaiA9IHt9XG5cbiAgLy8gQ29udmVydCBidWZmZXIgdG8gc3RyaW5nXG4gIGxldCBsaW5lcyA9IHNyYy50b1N0cmluZygpXG5cbiAgLy8gQ29udmVydCBsaW5lIGJyZWFrcyB0byBzYW1lIGZvcm1hdFxuICBsaW5lcyA9IGxpbmVzLnJlcGxhY2UoL1xcclxcbj8vbWcsICdcXG4nKVxuXG4gIGxldCBtYXRjaFxuICB3aGlsZSAoKG1hdGNoID0gTElORS5leGVjKGxpbmVzKSkgIT0gbnVsbCkge1xuICAgIGNvbnN0IGtleSA9IG1hdGNoWzFdXG5cbiAgICAvLyBEZWZhdWx0IHVuZGVmaW5lZCBvciBudWxsIHRvIGVtcHR5IHN0cmluZ1xuICAgIGxldCB2YWx1ZSA9IChtYXRjaFsyXSB8fCAnJylcblxuICAgIC8vIFJlbW92ZSB3aGl0ZXNwYWNlXG4gICAgdmFsdWUgPSB2YWx1ZS50cmltKClcblxuICAgIC8vIENoZWNrIGlmIGRvdWJsZSBxdW90ZWRcbiAgICBjb25zdCBtYXliZVF1b3RlID0gdmFsdWVbMF1cblxuICAgIC8vIFJlbW92ZSBzdXJyb3VuZGluZyBxdW90ZXNcbiAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL14oWydcImBdKShbXFxzXFxTXSopXFwxJC9tZywgJyQyJylcblxuICAgIC8vIEV4cGFuZCBuZXdsaW5lcyBpZiBkb3VibGUgcXVvdGVkXG4gICAgaWYgKG1heWJlUXVvdGUgPT09ICdcIicpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFxcXG4vZywgJ1xcbicpXG4gICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1xcXFxyL2csICdcXHInKVxuICAgIH1cblxuICAgIC8vIEFkZCB0byBvYmplY3RcbiAgICBvYmpba2V5XSA9IHZhbHVlXG4gIH1cblxuICByZXR1cm4gb2JqXG59XG5cbmZ1bmN0aW9uIF9sb2cgKG1lc3NhZ2UpIHtcbiAgY29uc29sZS5sb2coYFtkb3RlbnZdW0RFQlVHXSAke21lc3NhZ2V9YClcbn1cblxuZnVuY3Rpb24gX3Jlc29sdmVIb21lIChlbnZQYXRoKSB7XG4gIHJldHVybiBlbnZQYXRoWzBdID09PSAnficgPyBwYXRoLmpvaW4ob3MuaG9tZWRpcigpLCBlbnZQYXRoLnNsaWNlKDEpKSA6IGVudlBhdGhcbn1cblxuLy8gUG9wdWxhdGVzIHByb2Nlc3MuZW52IGZyb20gLmVudiBmaWxlXG5mdW5jdGlvbiBjb25maWcgKG9wdGlvbnMpIHtcbiAgbGV0IGRvdGVudlBhdGggPSBwYXRoLnJlc29sdmUocHJvY2Vzcy5jd2QoKSwgJy5lbnYnKVxuICBsZXQgZW5jb2RpbmcgPSAndXRmOCdcbiAgY29uc3QgZGVidWcgPSBCb29sZWFuKG9wdGlvbnMgJiYgb3B0aW9ucy5kZWJ1ZylcbiAgY29uc3Qgb3ZlcnJpZGUgPSBCb29sZWFuKG9wdGlvbnMgJiYgb3B0aW9ucy5vdmVycmlkZSlcblxuICBpZiAob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLnBhdGggIT0gbnVsbCkge1xuICAgICAgZG90ZW52UGF0aCA9IF9yZXNvbHZlSG9tZShvcHRpb25zLnBhdGgpXG4gICAgfVxuICAgIGlmIChvcHRpb25zLmVuY29kaW5nICE9IG51bGwpIHtcbiAgICAgIGVuY29kaW5nID0gb3B0aW9ucy5lbmNvZGluZ1xuICAgIH1cbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gU3BlY2lmeWluZyBhbiBlbmNvZGluZyByZXR1cm5zIGEgc3RyaW5nIGluc3RlYWQgb2YgYSBidWZmZXJcbiAgICBjb25zdCBwYXJzZWQgPSBEb3RlbnZNb2R1bGUucGFyc2UoZnMucmVhZEZpbGVTeW5jKGRvdGVudlBhdGgsIHsgZW5jb2RpbmcgfSkpXG5cbiAgICBPYmplY3Qua2V5cyhwYXJzZWQpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvY2Vzcy5lbnYsIGtleSkpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnZba2V5XSA9IHBhcnNlZFtrZXldXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAob3ZlcnJpZGUgPT09IHRydWUpIHtcbiAgICAgICAgICBwcm9jZXNzLmVudltrZXldID0gcGFyc2VkW2tleV1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkZWJ1Zykge1xuICAgICAgICAgIGlmIChvdmVycmlkZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgX2xvZyhgXCIke2tleX1cIiBpcyBhbHJlYWR5IGRlZmluZWQgaW4gXFxgcHJvY2Vzcy5lbnZcXGAgYW5kIFdBUyBvdmVyd3JpdHRlbmApXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF9sb2coYFwiJHtrZXl9XCIgaXMgYWxyZWFkeSBkZWZpbmVkIGluIFxcYHByb2Nlc3MuZW52XFxgIGFuZCB3YXMgTk9UIG92ZXJ3cml0dGVuYClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIHsgcGFyc2VkIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChkZWJ1Zykge1xuICAgICAgX2xvZyhgRmFpbGVkIHRvIGxvYWQgJHtkb3RlbnZQYXRofSAke2UubWVzc2FnZX1gKVxuICAgIH1cblxuICAgIHJldHVybiB7IGVycm9yOiBlIH1cbiAgfVxufVxuXG5jb25zdCBEb3RlbnZNb2R1bGUgPSB7XG4gIGNvbmZpZyxcbiAgcGFyc2Vcbn1cblxubW9kdWxlLmV4cG9ydHMuY29uZmlnID0gRG90ZW52TW9kdWxlLmNvbmZpZ1xubW9kdWxlLmV4cG9ydHMucGFyc2UgPSBEb3RlbnZNb2R1bGUucGFyc2Vcbm1vZHVsZS5leHBvcnRzID0gRG90ZW52TW9kdWxlXG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJmc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJvc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJwYXRoXCIpOyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcImh0dHBcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJjbHVzdGVyXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiY3J5cHRvXCIpOyIsImltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcbmNvbnN0IHJuZHM4UG9vbCA9IG5ldyBVaW50OEFycmF5KDI1Nik7IC8vICMgb2YgcmFuZG9tIHZhbHVlcyB0byBwcmUtYWxsb2NhdGVcblxubGV0IHBvb2xQdHIgPSBybmRzOFBvb2wubGVuZ3RoO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcm5nKCkge1xuICBpZiAocG9vbFB0ciA+IHJuZHM4UG9vbC5sZW5ndGggLSAxNikge1xuICAgIGNyeXB0by5yYW5kb21GaWxsU3luYyhybmRzOFBvb2wpO1xuICAgIHBvb2xQdHIgPSAwO1xuICB9XG5cbiAgcmV0dXJuIHJuZHM4UG9vbC5zbGljZShwb29sUHRyLCBwb29sUHRyICs9IDE2KTtcbn0iLCJleHBvcnQgZGVmYXVsdCAvXig/OlswLTlhLWZdezh9LVswLTlhLWZdezR9LVsxLTVdWzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9fDAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCkkL2k7IiwiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG5cbmNvbnN0IGJ5dGVUb0hleCA9IFtdO1xuXG5mb3IgKGxldCBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gIGJ5dGVUb0hleC5wdXNoKChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zdWJzdHIoMSkpO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIC8vIE5vdGU6IEJlIGNhcmVmdWwgZWRpdGluZyB0aGlzIGNvZGUhICBJdCdzIGJlZW4gdHVuZWQgZm9yIHBlcmZvcm1hbmNlXG4gIC8vIGFuZCB3b3JrcyBpbiB3YXlzIHlvdSBtYXkgbm90IGV4cGVjdC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZC9wdWxsLzQzNFxuICBjb25zdCB1dWlkID0gKGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgM11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDVdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA3XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDhdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxM11dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNV1dKS50b0xvd2VyQ2FzZSgpOyAvLyBDb25zaXN0ZW5jeSBjaGVjayBmb3IgdmFsaWQgVVVJRC4gIElmIHRoaXMgdGhyb3dzLCBpdCdzIGxpa2VseSBkdWUgdG8gb25lXG4gIC8vIG9mIHRoZSBmb2xsb3dpbmc6XG4gIC8vIC0gT25lIG9yIG1vcmUgaW5wdXQgYXJyYXkgdmFsdWVzIGRvbid0IG1hcCB0byBhIGhleCBvY3RldCAobGVhZGluZyB0b1xuICAvLyBcInVuZGVmaW5lZFwiIGluIHRoZSB1dWlkKVxuICAvLyAtIEludmFsaWQgaW5wdXQgdmFsdWVzIGZvciB0aGUgUkZDIGB2ZXJzaW9uYCBvciBgdmFyaWFudGAgZmllbGRzXG5cbiAgaWYgKCF2YWxpZGF0ZSh1dWlkKSkge1xuICAgIHRocm93IFR5cGVFcnJvcignU3RyaW5naWZpZWQgVVVJRCBpcyBpbnZhbGlkJyk7XG4gIH1cblxuICByZXR1cm4gdXVpZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgc3RyaW5naWZ5OyIsImltcG9ydCBSRUdFWCBmcm9tICcuL3JlZ2V4LmpzJztcblxuZnVuY3Rpb24gdmFsaWRhdGUodXVpZCkge1xuICByZXR1cm4gdHlwZW9mIHV1aWQgPT09ICdzdHJpbmcnICYmIFJFR0VYLnRlc3QodXVpZCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHZhbGlkYXRlOyIsImltcG9ydCBybmcgZnJvbSAnLi9ybmcuanMnO1xuaW1wb3J0IHN0cmluZ2lmeSBmcm9tICcuL3N0cmluZ2lmeS5qcyc7XG5cbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBjb25zdCBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTsgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuXG4gIHJuZHNbNl0gPSBybmRzWzZdICYgMHgwZiB8IDB4NDA7XG4gIHJuZHNbOF0gPSBybmRzWzhdICYgMHgzZiB8IDB4ODA7IC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuXG4gIGlmIChidWYpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgYnVmW29mZnNldCArIGldID0gcm5kc1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVmO1xuICB9XG5cbiAgcmV0dXJuIHN0cmluZ2lmeShybmRzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdjQ7IiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5pbXBvcnQgeyB2NCBhcyB1dWlkIH0gZnJvbSAndXVpZCc7XHJcbmV4cG9ydCBjb25zdCBNZXRob2QgPSB7XHJcbiAgICBHRVQ6ICdHRVQnLFxyXG4gICAgUE9TVDogJ1BPU1QnLFxyXG4gICAgUFVUOiAnUFVUJyxcclxuICAgIERFTEVURTogJ0RFTEVURSdcclxufTtcclxuZXhwb3J0IGNvbnN0IGlzVVVJRCA9ICh1dWlkKSA9PiB7XHJcbiAgICByZXR1cm4gISF1dWlkLm1hdGNoKCdeWzAtOWEtZkEtRl17OH0tWzAtOWEtZkEtRl17NH0tWzAtOWEtZkEtRl17NH0tWzAtOWEtZkEtRl17NH0tWzAtOWEtZkEtRl17MTJ9JCcpO1xyXG59O1xyXG5leHBvcnQgbGV0IElOX01FTU9SWV9CQVNFID0gW107XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVVc2VyID0gKGJvZHkpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgY29uc3QgcGFyc2VkQm9keSA9IHlpZWxkIEpTT04ucGFyc2UoYm9keSk7XHJcbiAgICBjb25zdCB2YWxpZFVzZXIgPSBwYXJzZWRCb2R5LnVzZXJuYW1lICYmIHBhcnNlZEJvZHkuYWdlICYmIHBhcnNlZEJvZHkuaG9iYmllcztcclxuICAgIGlmICh2YWxpZFVzZXIpIHtcclxuICAgICAgICBjb25zdCBuZXdVc2VyID0ge1xyXG4gICAgICAgICAgICBpZDogdXVpZCgpLFxyXG4gICAgICAgICAgICB1c2VybmFtZTogcGFyc2VkQm9keS51c2VybmFtZSxcclxuICAgICAgICAgICAgYWdlOiBwYXJzZWRCb2R5LmFnZSxcclxuICAgICAgICAgICAgaG9iYmllczogcGFyc2VkQm9keS5ob2JiaWVzLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgSU5fTUVNT1JZX0JBU0UucHVzaChuZXdVc2VyKTtcclxuICAgICAgICByZXR1cm4gbmV3VXNlcjtcclxuICAgIH1cclxufSk7XHJcbmV4cG9ydCBjb25zdCB1cGRhdGVVc2VyID0gKGJvZHksIGlkKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgIGNvbnN0IHBhcnNlZEJvZHkgPSB5aWVsZCBKU09OLnBhcnNlKGJvZHkpO1xyXG4gICAgY29uc3QgdmFsaWRVc2VyID0geWllbGQgdmFsaWRhdGVVc2VyKHBhcnNlZEJvZHksIGlkKTtcclxuICAgIGlmICh2YWxpZFVzZXIpIHtcclxuICAgICAgICBjb25zdCBuZXdVc2VyID0ge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgdXNlcm5hbWU6IHBhcnNlZEJvZHkudXNlcm5hbWUsXHJcbiAgICAgICAgICAgIGFnZTogcGFyc2VkQm9keS5hZ2UsXHJcbiAgICAgICAgICAgIGhvYmJpZXM6IHBhcnNlZEJvZHkuaG9iYmllcyxcclxuICAgICAgICB9O1xyXG4gICAgICAgIElOX01FTU9SWV9CQVNFID0gWy4uLklOX01FTU9SWV9CQVNFLmZpbHRlcih1c2VyID0+IHVzZXIuaWQgIT09IGlkKSwgbmV3VXNlcl07XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn0pO1xyXG5leHBvcnQgY29uc3QgZGVsZXRlVXNlciA9IChpZCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICBjb25zdCB1c2VyRXhpc3RzID0geWllbGQgZ2V0VXNlcihpZCk7XHJcbiAgICBpZiAodXNlckV4aXN0cykge1xyXG4gICAgICAgIElOX01FTU9SWV9CQVNFID0gSU5fTUVNT1JZX0JBU0UuZmlsdGVyKHVzZXIgPT4gdXNlci5pZCAhPT0gaWQpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59KTtcclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlVXNlciA9ICh1c2VyLCBpZCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICBjb25zdCB1c2VyRXhpc3RzID0geWllbGQgZ2V0VXNlcihpZCk7XHJcbiAgICByZXR1cm4gdXNlckV4aXN0cyAmJiB1c2VyLnVzZXJuYW1lICYmIHVzZXIuYWdlICYmIHVzZXIuaG9iYmllcztcclxufSk7XHJcbmV4cG9ydCBjb25zdCBnZXRVc2VyID0gKGlkKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgIHJldHVybiBJTl9NRU1PUllfQkFTRS5maW5kKHVzZXIgPT4gdXNlci5pZCA9PT0gaWQpO1xyXG59KTtcclxuZXhwb3J0IGNvbnN0IGdldFVzZXJKU09OID0gKGlkKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh5aWVsZCBnZXRVc2VyKGlkKSk7XHJcbn0pO1xyXG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbmltcG9ydCB7IGRlbGV0ZVVzZXIsIGlzVVVJRCB9IGZyb20gJy4uL3V0aWxzJztcclxuZXhwb3J0IGNvbnN0IGRlbGV0ZVVzZXJNZXRob2QgPSAocmVxLCByZXMsIGlkKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgIGlmIChpZCAmJiBpc1VVSUQoaWQpKSB7XHJcbiAgICAgICAgY29uc3QgZGVsZXRlZFVzZXIgPSB5aWVsZCBkZWxldGVVc2VyKGlkKTtcclxuICAgICAgICBpZiAoZGVsZXRlZFVzZXIpIHtcclxuICAgICAgICAgICAgcmVzLndyaXRlSGVhZCgyMDQsIHsgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTtcclxuICAgICAgICAgICAgcmVzLmVuZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmVzLndyaXRlSGVhZCg0MDQsIHsgJ0NvbnRlbnQtdHlwZSc6ICd0ZXh0L2h0bWwnIH0pO1xyXG4gICAgICAgICAgICByZXMuZW5kKCdVc2VyIE5vdCBGb3VuZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICA7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXMud3JpdGVIZWFkKDQwMCwgeyAnQ29udGVudC10eXBlJzogJ3RleHQvaHRtbCcgfSk7XHJcbiAgICAgICAgcmVzLmVuZCgnSW52YWxpZCBVc2VySWQnKTtcclxuICAgIH1cclxufSk7XHJcbiIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxuaW1wb3J0IHsgZ2V0VXNlciwgZ2V0VXNlckpTT04sIGlzVVVJRCwgSU5fTUVNT1JZX0JBU0UgfSBmcm9tICcuLi91dGlscyc7XHJcbmV4cG9ydCBjb25zdCBnZXRVc2VyTWV0aG9kID0gKHJlcywgaWQpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgaWYgKCFpZCkge1xyXG4gICAgICAgIHJlcy53cml0ZUhlYWQoMjAwLCB7ICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSk7XHJcbiAgICAgICAgcmVzLmVuZChKU09OLnN0cmluZ2lmeShJTl9NRU1PUllfQkFTRSkpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgaWYgKGlzVVVJRChpZCkpIHtcclxuICAgICAgICAgICAgY29uc3QgdXNlckV4aXN0cyA9IHlpZWxkIGdldFVzZXIoaWQpO1xyXG4gICAgICAgICAgICBpZiAodXNlckV4aXN0cykge1xyXG4gICAgICAgICAgICAgICAgcmVzLndyaXRlSGVhZCgyMDAsIHsgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTtcclxuICAgICAgICAgICAgICAgIHJlcy5lbmQoeWllbGQgZ2V0VXNlckpTT04oaWQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlcy53cml0ZUhlYWQoNDA0LCB7ICdDb250ZW50LXR5cGUnOiAndGV4dC9odG1sJyB9KTtcclxuICAgICAgICAgICAgICAgIHJlcy5lbmQoJ1VzZXIgTm90IEZvdW5kJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlcy53cml0ZUhlYWQoNDAwLCB7ICdDb250ZW50LXR5cGUnOiAndGV4dC9odG1sJyB9KTtcclxuICAgICAgICAgICAgcmVzLmVuZCgnSW52YWxpZCBVc2VySWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pO1xyXG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbmltcG9ydCB7IGNyZWF0ZVVzZXIgfSBmcm9tICcuLi91dGlscyc7XHJcbmV4cG9ydCBjb25zdCBwb3N0VXNlck1ldGhvZCA9IChyZXEsIHJlcykgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICBsZXQgYm9keSA9ICcnO1xyXG4gICAgcmVxLm9uKCdkYXRhJywgKGNodW5rKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBib2R5ICs9IGNodW5rLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgY29uc3QgY3JlYXRlZFVzZXIgPSB5aWVsZCBjcmVhdGVVc2VyKGJvZHkpO1xyXG4gICAgICAgIGlmIChjcmVhdGVkVXNlcikge1xyXG4gICAgICAgICAgICByZXMud3JpdGVIZWFkKDIwMSwgeyAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pO1xyXG4gICAgICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KGNyZWF0ZWRVc2VyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXMud3JpdGVIZWFkKDQwMCwgeyAnQ29udGVudC10eXBlJzogJ3RleHQvaHRtbCcgfSk7XHJcbiAgICAgICAgICAgIHJlcy5lbmQoJ0ludmFsaWQgRGF0YSBGb3JtYXQnKTtcclxuICAgICAgICB9XHJcbiAgICB9KSk7XHJcbn0pO1xyXG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbmltcG9ydCB7IGdldFVzZXIsIGdldFVzZXJKU09OLCBpc1VVSUQsIHVwZGF0ZVVzZXIgfSBmcm9tICcuLi91dGlscyc7XHJcbmV4cG9ydCBjb25zdCBwdXRVc2VyTWV0aG9kID0gKHJlcSwgcmVzLCBpZCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICBpZiAoaWQgJiYgaXNVVUlEKGlkKSkge1xyXG4gICAgICAgIGxldCBib2R5ID0gJyc7XHJcbiAgICAgICAgcmVxLm9uKCdkYXRhJywgKGNodW5rKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgYm9keSArPSBjaHVuay50b1N0cmluZygpO1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyRXhpc3RzID0geWllbGQgZ2V0VXNlcihpZCk7XHJcbiAgICAgICAgICAgIGlmICh1c2VyRXhpc3RzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkVXNlciA9IHlpZWxkIHVwZGF0ZVVzZXIoYm9keSwgaWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRVc2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLndyaXRlSGVhZCgyMDAsIHsgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXMuZW5kKHlpZWxkIGdldFVzZXJKU09OKGlkKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXMud3JpdGVIZWFkKDQwMCwgeyAnQ29udGVudC10eXBlJzogJ3RleHQvaHRtbCcgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnSW52YWxpZCBEYXRhIEZvcm1hdCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzLndyaXRlSGVhZCg0MDQsIHsgJ0NvbnRlbnQtdHlwZSc6ICd0ZXh0L2h0bWwnIH0pO1xyXG4gICAgICAgICAgICAgICAgcmVzLmVuZCgnVXNlciBOb3QgRm91bmQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJlcy53cml0ZUhlYWQoNDAwLCB7ICdDb250ZW50LXR5cGUnOiAndGV4dC9odG1sJyB9KTtcclxuICAgICAgICByZXMuZW5kKCdJbnZhbGlkIFVzZXJJZCcpO1xyXG4gICAgfVxyXG59KTtcclxuIiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJwcm9jZXNzXCIpOyIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxuaW1wb3J0IGh0dHAgZnJvbSAnaHR0cCc7XHJcbmltcG9ydCBjbHVzdGVyIGZyb20gJ2NsdXN0ZXInO1xyXG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XHJcbmltcG9ydCB7IGRlbGV0ZVVzZXJNZXRob2QgfSBmcm9tICcuL3NyYy9tZXRob2RzL2RlbGV0ZSc7XHJcbmltcG9ydCB7IGdldFVzZXJNZXRob2QgfSBmcm9tICcuL3NyYy9tZXRob2RzL2dldCc7XHJcbmltcG9ydCB7IHBvc3RVc2VyTWV0aG9kIH0gZnJvbSAnLi9zcmMvbWV0aG9kcy9wb3N0JztcclxuaW1wb3J0IHsgcHV0VXNlck1ldGhvZCB9IGZyb20gJy4vc3JjL21ldGhvZHMvcHV0JztcclxuaW1wb3J0IHsgTWV0aG9kIH0gZnJvbSAnLi9zcmMvdXRpbHMnO1xyXG5pbXBvcnQgeyBlbnYgfSBmcm9tICdwcm9jZXNzJztcclxuZG90ZW52LmNvbmZpZygpO1xyXG5jb25zdCBQT1JUID0gcHJvY2Vzcy5lbnYuUE9SVDtcclxuZXhwb3J0IGNvbnN0IHNlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKChyZXEsIHJlcykgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICB2YXIgX2EsIF9iO1xyXG4gICAgY29uc3QgYmFzZVVybCA9ICcvYXBpL3VzZXJzJztcclxuICAgIGNvbnN0IGlkID0gKF9hID0gcmVxLnVybCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlcGxhY2UoYmFzZVVybCwgJycpLnN1YnN0cmluZygxKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKHJlcS51cmwgPT09IGJhc2VVcmwgfHwgKChfYiA9IHJlcS51cmwpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5zdGFydHNXaXRoKGJhc2VVcmwpKSAmJiBpZCkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHJlcS5tZXRob2QpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgTWV0aG9kLkdFVDpcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCBnZXRVc2VyTWV0aG9kKHJlcywgaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXRob2QuUE9TVDpcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCBwb3N0VXNlck1ldGhvZChyZXEsIHJlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE1ldGhvZC5QVVQ6XHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcHV0VXNlck1ldGhvZChyZXEsIHJlcywgaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBNZXRob2QuREVMRVRFOlxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGRlbGV0ZVVzZXJNZXRob2QocmVxLCByZXMsIGlkKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgZ2V0VXNlck1ldGhvZChyZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXMud3JpdGVIZWFkKDQwNCwgeyAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pO1xyXG4gICAgICAgICAgICByZXMuZW5kKEpTT04uc3RyaW5naWZ5KHsgbWVzc2FnZTogJ1JvdXRlIE5vdCBGb3VuZCcgfSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICByZXMud3JpdGVIZWFkKDUwMCwgeyAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0pO1xyXG4gICAgICAgIHJlcy5lbmQoSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyB9KSk7XHJcbiAgICB9XHJcbn0pKTtcclxuLy8gTG9hZCBiYWxhbmNlclxyXG5pZiAoZW52Lm5wbV9jb25maWdfbW9kZSA9PT0gJ211bHRpJykge1xyXG4gICAgY29uc3QgbnVtQ1BVcyA9IHJlcXVpcmUoJ29zJykuY3B1cygpLmxlbmd0aDtcclxuICAgIGlmIChjbHVzdGVyLmlzUHJpbWFyeSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBNYXN0ZXIgJHtwcm9jZXNzLnBpZH0gaXMgcnVubmluZ2ApO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtQ1BVczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNsdXN0ZXIuZm9yaygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjbHVzdGVyLm9uKCdleGl0JywgKHdvcmtlciwgY29kZSwgc2lnbmFsKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGB3b3JrZXIgJHt3b3JrZXIucHJvY2Vzcy5waWR9IGRpZWRgKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHNlcnZlci5saXN0ZW4oUE9SVCwgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgV29ya2VyICR7cHJvY2Vzcy5waWR9IHN0YXJ0ZWRgKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5lbHNlIHtcclxuICAgIHNlcnZlci5saXN0ZW4oUE9SVCwgKCkgPT4gY29uc29sZS5sb2coYFNlcnZlciBzdGFydGVkIGF0IGh0dHA6Ly9sb2NhbGhvc3Q6JHtQT1JUfWApKTtcclxufVxyXG4iXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwib3MiLCJMSU5FIiwiX2xvZyIsIm1lc3NhZ2UiLCJjb25zb2xlIiwibG9nIiwiRG90ZW52TW9kdWxlIiwiY29uZmlnIiwib3B0aW9ucyIsImRvdGVudlBhdGgiLCJyZXNvbHZlIiwicHJvY2VzcyIsImN3ZCIsImVuY29kaW5nIiwiZGVidWciLCJCb29sZWFuIiwib3ZlcnJpZGUiLCJlbnZQYXRoIiwiam9pbiIsImhvbWVkaXIiLCJzbGljZSIsInBhcnNlZCIsInBhcnNlIiwicmVhZEZpbGVTeW5jIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJlbnYiLCJlIiwiZXJyb3IiLCJzcmMiLCJvYmoiLCJtYXRjaCIsImxpbmVzIiwidG9TdHJpbmciLCJyZXBsYWNlIiwiZXhlYyIsInZhbHVlIiwidHJpbSIsIm1heWJlUXVvdGUiLCJtb2R1bGUiLCJleHBvcnRzIiwicmVxdWlyZSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJwcm9wIiwicm5kczhQb29sIiwiVWludDhBcnJheSIsInBvb2xQdHIiLCJsZW5ndGgiLCJybmciLCJieXRlVG9IZXgiLCJpIiwicHVzaCIsInN1YnN0ciIsImFyciIsIm9mZnNldCIsInV1aWQiLCJ0b0xvd2VyQ2FzZSIsIlR5cGVFcnJvciIsImJ1ZiIsInJuZHMiLCJyYW5kb20iLCJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJQcm9taXNlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJpc1VVSUQiLCJJTl9NRU1PUllfQkFTRSIsImdldFVzZXIiLCJpZCIsImZpbmQiLCJ1c2VyIiwiZ2V0VXNlckpTT04iLCJKU09OIiwic3RyaW5naWZ5IiwiZGVsZXRlVXNlck1ldGhvZCIsInJlcSIsInJlcyIsImRlbGV0ZWRVc2VyIiwiZmlsdGVyIiwiZGVsZXRlVXNlciIsIndyaXRlSGVhZCIsImVuZCIsImdldFVzZXJNZXRob2QiLCJwdXRVc2VyTWV0aG9kIiwiYm9keSIsIm9uIiwiY2h1bmsiLCJ1cGRhdGVkVXNlciIsInBhcnNlZEJvZHkiLCJ1c2VybmFtZSIsImFnZSIsImhvYmJpZXMiLCJ2YWxpZGF0ZVVzZXIiLCJuZXdVc2VyIiwidXBkYXRlVXNlciIsIlBPUlQiLCJzZXJ2ZXIiLCJfYSIsIl9iIiwiYmFzZVVybCIsInVybCIsInN1YnN0cmluZyIsInN0YXJ0c1dpdGgiLCJtZXRob2QiLCJjcmVhdGVkVXNlciIsImNyZWF0ZVVzZXIiLCJwb3N0VXNlck1ldGhvZCIsImVyciIsIm51bUNQVXMiLCJwaWQiLCJ3b3JrZXIiLCJjb2RlIiwic2lnbmFsIiwibGlzdGVuIl0sInNvdXJjZVJvb3QiOiIifQ==